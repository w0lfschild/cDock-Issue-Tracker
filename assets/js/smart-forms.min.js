!function i(a,u,s){function l(t,e){if(!u[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=u[t]={exports:{}};a[t][0].call(o.exports,function(e){return l(a[t][1][e]||e)},o,o.exports,i,a,u,s)}return u[t].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({1:[function(e,t,n){"use strict";var r=e("./src/Form"),o=e("./src/helpers/on"),i=e("./src/helpers/addStyles"),a="https://bootstrapstudio.io/smartform-handler",u="https://bootstrapstudio.io/smartform-iframe?large=1",s="showMessage",l=null,c=document.createElement("iframe"),f=document.createElement("div");function p(){h(f),h(c)}function h(e){for(;e.firstChild;)e.removeChild(e.firstChild);e.parentNode.removeChild(e)}function y(e){d({operation:s,message:e.message||"",status:e.status||"loading",title:e.title||""},"*")}function d(e,t){c.contentWindow.postMessage(e,t)}function v(){y({status:"success",message:"Your message has been delivered."}),l.reset()}function b(e){var t="Oops...",n="Something went wrong, please try again later.";e&&e.error&&(e.error.title&&(t=e.error.title),e.error.message&&(n=e.error.message)),y({status:"error",title:t,message:n})}i(c,{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block",maxWidth:"100%",width:"600px",height:"500px",background:"white",border:"none",borderRadius:"10px",zIndex:"9999"}),i(f,{position:"fixed",display:"block",top:"0",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.7)",zIndex:"9998"}),o(c,"load",null,function(){if(!l)return;10485760<l.getFileSize()?y({status:"error",message:"Please make sure the total size of attachments is less than 10mb."}):d({operation:"showRecaptcha"},"*")}),o(window,"message",null,function(e){var t=e.data,n=t.operation,r=t.recaptchaToken;"submitEmail"===n?(o=r,l.submit(a,"POST",[{name:"recaptchaToken",value:o},{name:"sentFromURL",value:window.location.href}])):"closeIframe"===n&&p();var o}),o(document,"submit","form[data-bss-recipient]",function(e){e.preventDefault(),l=new r(e.target,{onSuccess:v,onError:b,beforeSend:y.bind(null,{status:"loading",message:"Sending..."})}),c.src=u,document.body.appendChild(c),document.body.appendChild(f)},!0),o(f,"click",null,p)},{"./src/Form":6,"./src/helpers/addStyles":10,"./src/helpers/on":11}],2:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"get",value:function(e){e.method="GET",t.send(e)}},{key:"post",value:function(e){e.method="POST",t.send(e)}},{key:"send",value:function(n){var e=n.headers||{"X-Requested-With":"XMLHttpRequest"},t=n.body||null,r=n.method||(t?"POST":"GET"),o=n.url,i=new XMLHttpRequest;for(var a in n.beforeSend&&n.beforeSend(),i.open(r,o,!0),i.onload=function(e){if(4===i.readyState){var t={};try{t=JSON.parse(i.responseText),200===i.status?n.success&&n.success(t):n.error&&n.error(t)}catch(e){console.error(e)}}},i.onerror=function(e){n.error&&n.error({})},e)i.setRequestHeader(a,e[a]);i.send(t)}}]),t}();t.exports=o},{}],3:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=e("./RadioButton"),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),r(t,[{key:"getType",value:function(){return"checkbox"}},{key:"hasValue",value:function(){return!0}},{key:"getName",value:function(){return this.hasMultipleValues()?function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getName",this).call(this):""}},{key:"hasMultipleValues",value:function(){return!!this.getSiblings().length}}]),t}();t.exports=i},{"./RadioButton":8}],4:[function(e,t,n){"use strict";var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var r=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.element=e,this.id=e.id.trim(),this.text=e.innerText.trim()}return o(r,[{key:"isTag",value:function(e){return this.element.tagName.toLowerCase()===e.toLowerCase()}},{key:"find",value:function(e){return this.element.querySelector(e)}},{key:"findAll",value:function(e){return this.element.querySelectorAll(e)}},{key:"getParentByTag",value:function(e){for(var t=this.element;(t=t.parentNode)&&t!==document;){var n=new r(t,this.form);if(n.isTag(e))return n}return null}}]),r}();t.exports=r},{}],5:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=e("./FormField"),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),r(t,[{key:"getType",value:function(){return"file"}},{key:"getData",value:function(){for(var e=[],t=0;t<this.element.files.length;t++)e.push({name:(this.isNameSet()?this.getName():this.identifier)+(1<this.element.files.length?"[]":""),value:this.element.files[t]});return e}},{key:"getSize",value:function(){for(var e=0,t=0;t<this.element.files.length;t++)e+=this.element.files[t].size;return e}}]),t}();t.exports=i},{"./FormField":7}],6:[function(e,t,n){"use strict";var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=e("./Component"),a=e("./Checkbox"),u=e("./FormField"),s=e("./RadioButton"),l=e("./Select"),c=e("./FileField"),f=e("./Ajax"),r=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return n.options=t,n.recipient=e.getAttribute("data-bss-recipient"),n.initialize(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i),o(r,[{key:"initialize",value:function(){var e=this.element.querySelectorAll("input, textarea, select");this.fields=[];for(var t=0;t<e.length;t++){"submit"!==e[t].type&&this.fields.push(this.createChild(e[t],"field-"+t))}}},{key:"createChild",value:function(e,t){var n=void 0;switch(e.tagName.toLowerCase()){case"input":n="radio"===e.type?new s(e,this,t):"checkbox"===e.type?new a(e,this,t):"file"===e.type?new c(e,this,t):new u(e,this,t);break;case"select":n=new l(e,this,t);break;default:n=new u(e,this,t)}return n}},{key:"getDataFields",value:function(){return this.fields.filter(function(e){return"file"!==e.getType()})}},{key:"getFileFields",value:function(){return this.fields.filter(function(e){return"file"===e.getType()})}},{key:"getData",value:function(){var n=this.getDataFields().slice(),r=[];return n.forEach(function(e){if(e.hasValue())if(e.hasMultipleValues()){var t={name:e.getName(),data:{type:e.getType(),value:[].concat(e.getValue())}};"checkbox"===e.getType()&&e.getSiblings().forEach(function(e){t.data.value.push(e.getValue()),n.splice(n.indexOf(e),1)}),r=r.concat(t)}else r=r.concat(e.getData())}),r}},{key:"getFiles",value:function(){var t=[];return this.getFileFields().forEach(function(e){e.hasValue()&&(t=t.concat(e.getData()))}),t}},{key:"getFieldsByType",value:function(t){return this.fields.filter(function(e){return e instanceof t})}},{key:"getFileSize",value:function(){var e=this.getFieldsByType(c),t=0;return e.forEach(function(e){t+=e.getSize()}),t}},{key:"submit",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],r=this.getFiles(),o=new FormData,i=[].filter.call(this.element.attributes,function(e){return e.name.match(/^data-bss-/g)}).map(function(e){return{name:e.name.replace("data-bss-",""),value:e.value}});r=r.concat(n,i);for(var a=0;a<r.length;a++)o.append(r[a].name,r[a].value);o.append("data",JSON.stringify(this.getData())),f.send({url:e,method:t,body:o,error:this.onError.bind(this),success:this.onSuccess.bind(this),beforeSend:this.beforeSend.bind(this)})}},{key:"reset",value:function(){this.element.reset()}},{key:"beforeSend",value:function(){this.options.beforeSend&&this.options.beforeSend()}},{key:"onSuccess",value:function(e){this.options.onSuccess&&this.options.onSuccess(e)}},{key:"onError",value:function(e){this.options.onError&&this.options.onError(e)}}]),r}();t.exports=r},{"./Ajax":2,"./Checkbox":3,"./Component":4,"./FileField":5,"./FormField":7,"./RadioButton":8,"./Select":9}],7:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=e("./Component"),o=function(e){function o(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return r.form=t,r.identifier=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,i),r(o,[{key:"getType",value:function(){return this.element.type||"text"}},{key:"hasValue",value:function(){return!!this.getValue()}},{key:"hasMultipleValues",value:function(){return!!this.element.multiple}},{key:"getValue",value:function(){return this.element.value.trim()}},{key:"getName",value:function(){var e=this.element.name.trim();if(!e){var t=this.getLabel();e=t?t.text:this.element.placeholder?this.element.placeholder:this.id?this.id:this.getDefaultName()}return this.normalizeName(e)}},{key:"getDefaultName",value:function(){return"Not Defined"}},{key:"isNameSet",value:function(){return this.getName()!==this.getDefaultName()}},{key:"normalizeName",value:function(e){return e.trim()}},{key:"getData",value:function(){return{name:this.getName(),data:{type:this.getType(),value:this.getValue()}}}},{key:"getLabel",value:function(){var e=void 0;if(this.id&&(e=this.form.find("label[for="+this.id+"]")))return new i(e);if(e=this.getParentByTag("label"))return e;var t=this.element.previousElementSibling?new i(this.element.previousElementSibling):null;return t&&t.isTag("label")?t:null}},{key:"getSiblings",value:function(){var t=this;return this.element.name.trim()?this.form.getFieldsByType(this.constructor).filter(function(e){return e!==t&&e.element.name===t.element.name}):[]}}]),o}();t.exports=o},{"./Component":4}],8:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0};var i=e("./FormField"),a=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i),r(n,[{key:"getType",value:function(){return"radio"}},{key:"hasValue",value:function(){return o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"hasValue",this).call(this)&&this.element.checked}},{key:"getValue",value:function(){var e=this.getLabel(),t=void 0;return e&&(t=e.text),{value:t||o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getValue",this).call(this),active:this.element.checked}}}]),n}();t.exports=a},{"./FormField":7}],9:[function(e,t,n){"use strict";var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=e("./FormField"),r=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n.options=n.element.options,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i),o(r,[{key:"getType",value:function(){return"select"}},{key:"getValue",value:function(){for(var e=[],t=0;t<this.options.length;t++)this.options[t].selected&&e.push({value:this.options[t].textContent});return e}}]),r}();t.exports=r},{"./FormField":7}],10:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n in t)e.style[n]=t[n]}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t,u,s,n){var r,l=void 0;n=n||!1,(l=e?"string"==typeof e?document.querySelector(e):e:document)&&(r=n?function(e){for(var t=l.querySelectorAll(u),n=e.target,r=0,o=t.length;r<o;r++)for(var i=n,a=t[r];i&&i!==l;){if(i===a)return s.call(a,e);i=i.parentNode}}:s,l.addEventListener(t,r))}},{}]},{},[1]);
